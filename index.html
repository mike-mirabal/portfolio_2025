<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="styles/index.css" />
  <link rel="icon" href="/assets/favicon.png" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mike Mirabal</title>
</head>
<body id="top" class="no-scroll">

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       SIDE NAV PANEL
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <nav id="sideNav" class="side-nav" aria-hidden="true">
    <ul class="nav-list">
      <li><a href="index.html">New Chat</a></li>
      <li class="has-sub">
        <button class="sub-toggle">Contact Mike</button>
        <ul class="sub-list">
          <li><a href="mailto:info@mikemirabal.com">Email</a></li>
          <li><a href="https://linkedin.com/in/mikemirabal" target="_blank">LinkedIn</a></li>
        </ul>
      </li>
      <li class="has-sub">
        <button class="sub-toggle">Projects</button>
        <ul class="sub-list">
          <li><a href="projects.html?filter=all">View All</a></li>
          <li><a href="projects.html?filter=ai">AI</a></li>
          <li><a href="projects.html?filter=art">Art</a></li>
          <li><a href="projects.html?filter=brand">Brand</a></li>
          <li><a href="projects.html?filter=design">Design</a></li>
          <li><a href="projects.html?filter=social">Social</a></li>
          <li><a href="projects.html?filter=marketing">Marketing</a></li>
          <li><a href="projects.html?filter=strategy">Strategy</a></li>
          <li><a href="projects.html?filter=systems">Systems</a></li>
          <li><a href="projects.html?filter=ux">UX</a></li>
          <li><a href="projects.html?filter=web">Web</a></li>
          <li><a href="projects.html?filter=xr">XR</a></li>
        </ul>
      </li>
    </ul>
  </nav>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       HEADER
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="header">
    <button id="navToggle" class="nav-toggle" aria-label="Toggle navigation">â˜°</button>
    <div class="theme-switch" onclick="toggleTheme()"></div>
  </div>
  
  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       HERO CHAT
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="pageContent">
    <div class="hero-chat">
      <h2 class="chat-heading">Chat with<br>Mike's AI Assistant</h2>
      <div id="chat-window" class="chat-window"></div>
      <form id="chat-form" class="chat-form">
        <input
          id="chat-input"
          type="text"
          placeholder="Ask me anything about Mikeâ€¦"
          autocomplete="off"
          required
        />
        <button type="submit" class="btn-send">â†‘</button>
      </form>
    </div>
  </div>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       FOOTER
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <footer class="compact-footer">
    Mike Mirabal Â© 2025 | Powered by Aigentask
  </footer>

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       SCRIPTS
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <script>
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // THEME PERSISTENCE: apply saved theme on load, then toggle+save
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    (function() {
      const saved = localStorage.getItem('theme');
      const theme = saved === 'dark' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', theme);
    })();

    function toggleTheme() {
      const root    = document.documentElement;
      const current = root.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
      const next    = current === 'dark' ? 'light' : 'dark';
      root.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
    }

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // SIDE-NAV OPEN/CLOSE + AUTO-COLLAPSE SUBMENUS
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ;(function() {
      const nav    = document.getElementById('sideNav');
      const toggle = document.getElementById('navToggle');
      const page   = document.getElementById('pageContent');

      toggle.addEventListener('click', e => {
        e.stopPropagation();
        nav.classList.toggle('open');
        const isOpen = nav.classList.contains('open');
        nav.setAttribute('aria-hidden', !isOpen);
        if (!isOpen) {
          document
            .querySelectorAll('.side-nav .has-sub.open')
            .forEach(li => li.classList.remove('open'));
        }
      });

      page.addEventListener('click', () => {
        if (nav.classList.contains('open')) closeNav();
      });

      function closeNav() {
        nav.classList.remove('open');
        nav.setAttribute('aria-hidden', 'true');
        document
          .querySelectorAll('.side-nav .has-sub.open')
          .forEach(li => li.classList.remove('open'));
      }

      document.querySelectorAll('.sub-toggle').forEach(btn => {
        btn.addEventListener('click', e => {
          e.stopPropagation();
          btn.parentElement.classList.toggle('open');
        });
      });
    })();

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // CHAT TYPEWRITER + USER ECHO LOGIC
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const chatWindow = document.getElementById("chat-window");
    const chatForm   = document.getElementById("chat-form");
    const chatInput  = document.getElementById("chat-input");

    function renderBotMessage(text) {
      const botDiv = document.createElement("div");
      botDiv.className = "message bot";
      const htmlReply = text
        .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>')
        .replace(/\n/g, '<br>');
      botDiv.innerHTML = `<span class="avatar">ðŸ¤–</span><div class="bubble-text">${htmlReply}</div>`;
      chatWindow.appendChild(botDiv);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    function renderUserMessage(text) {
      const userDiv = document.createElement("div");
      userDiv.className = "message user";
      userDiv.innerHTML = `<div class="bubble-text">${text}</div><span class="avatar">ðŸ™‚</span>`;
      chatWindow.appendChild(userDiv);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    function typeWriterLines(lines, wordDelay = 100, lineDelay = 400) {
      let lineIdx = 0;
      function nextLine() {
        if (lineIdx >= lines.length) return;
        renderBotMessage(lines[lineIdx]);
        lineIdx++;
        setTimeout(nextLine, lineDelay + lines[lineIdx - 1].split(" ").length * wordDelay);
      }
      nextLine();
    }

    window.addEventListener("DOMContentLoaded", () => {
      typeWriterLines([ "Hi! I'm Mike's Assistant.", "What do you want to know?" ]);
    });

    chatForm.addEventListener("submit", async e => {
      e.preventDefault();
      const userText = chatInput.value.trim();
      if (!userText) return;
      renderUserMessage(userText);
      chatInput.value = "";

      try {
        const resp = await fetch("/api/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: userText })
        });

        const json = await resp.json();
        console.log("ðŸ’¬ [api/chat] returned:", json);
        renderBotMessage(json.reply);
      } catch (err) {
        console.error("Chat request failed:", err);
      }
    });
  </script>
</body>
</html>
